uid: wp_Tab1
tags: []
props:
  parameters:
    - context: item
      description: The group that contains all heating items
      label: heating group
      name: heatGroup
      required: false
      type: TEXT
    - description: Calculated by oh-repeater
      label: heating group Label
      name: heatGroupLabel
      required: false
      type: TEXT
    - default: _Heating_curve_Circuit_1_slope
      description: The slope of the heatingcurve
      label: heating slope
      name: slope
      required: false
      type: TEXT
    - default: _Heating_curve_Circuit_1_shift
      description: The shift of the heatingcurve
      label: heating shift
      name: shift
      required: false
      type: TEXT
    - default: _Temperature_levels_Circuit_1_min
      description: minimum flow temperature for the heatingcurve
      label: min flow temperature
      name: tempMin
      required: false
      type: TEXT
    - default: _Temperature_levels_Circuit_1_max
      description: Maximum flow temperature of the heatingcurve
      label: max flow temperature
      name: tempMax
      required: false
      type: TEXT
    - context: Text
      label: Language
      name: lang
      required: true
      type: TEXT
    - context: Text
      label: ColorScheme
      name: tab1ColorScheme
      required: true
      type: TEXT
  parameterGroups: []
timestamp: Feb 23, 2026, 7:58:28 PM
component: f7-block
config:
  class:
    - no-margin
    - no-padding
  style:
    --f7-stepper-bordercolor: =props.tab1ColorScheme
    --f7-stepper-button-bg-color: =props.tab1ColorScheme
    --f7-stepper-value-text-color: gray
  stylesheet: >
    .stepper-value {
      border-bottom: var(--f7-stepper-border-width) solid var(--f7-stepper-bordercolor);
      border-top: var(--f7-stepper-border-width) solid var(--f7-stepper-bordercolor);
      width: 30px;
      }
    .stepper-button-minus, .stepper-button-plus  {
      border: 2px solid var(--f7-stepper-bordercolor) !important;
      color: white;
      }
    .stepper-button:hover {
      background-color: #555;
      }
slots:
  default:
    - component: f7-block
      config:
        class:
          - no-margin
          - no-padding
        style:
          background: url("/static/waermepumpe/Waermepumpe.svg")
          background-position: left -1px top -0px
          background-repeat: no-repeat
          background-size: 380px 260px
          font-size: 9px
          height: 270px
          overflow: hidden
        visible: =vars.openHeatingcurve?false:true
      slots:
        default:
          - component: Label
            config:
              style:
                font-size: 12px
                font-weight: bold
                left: 65px
                position: absolute
                top: 0px
              text: "=props.lang?'System diagram : '+(props.heatGroupLabel):'Anlagenschema : '+(props.heatGroupLabel)"
          - component: Label
            config:
              style:
                font-size: 10px
                font-weight: 700
                left: 10px
                position: absolute
                top: 21px
                white-space: wrap
                width: 50px
              text: "=props.lang?'Power : '+@(props.heatGroup+'_heatinginvertersNsensorspoweroutput_Circuit_0'):
                'Leistung : '+@(props.heatGroup+'_heatinginvertersNsensorspoweroutput_Circuit_0')"
          - component: Label
            config:
              style:
                left: 118px
                position: absolute
                top: 21px
              text: =@(props.heatGroup+"_heatingeconomizersNsensorstemperatureliquid_Circuit_0")
          - component: Label
            config:
              style:
                left: 162px
                position: absolute
                top: 21px
              text: =@(props.heatGroup+"_heatingsensorsvalveNexpansiontarget_Circuit_0")
          - component: Label
            config:
              style:
                left: 200px
                position: absolute
                top: 21px
              text: =@(props.heatGroup+"_heatingcondensorsNsensorstemperatureliquid_Circuit_0")
          - component: Label
            config:
              style:
                left: 283px
                position: absolute
                top: 21px
              text: =@(props.heatGroup+"_Flow_return_temperature_sensor")
          - component: Label
            config:
              style:
                left: 346px
                position: absolute
                top: 21px
              text: =@(props.heatGroup+"_heatingsensorspressuresupply")+" bar"
          - component: Label
            config:
              style:
                aleft: 298px
                left: 295px
                position: absolute
                top: 57px
              text: =@@(props.heatGroup+"_heatingboilerpumpsinternalcurrent")
          - component: Label
            config:
              style:
                left: 45px
                position: absolute
                top: 62px
              text: =@(props.heatGroup+"_heatingprimaryCircuitsensorstemperaturesupply")
          - component: Label
            config:
              style:
                left: 88px
                position: absolute
                top: 62px
              text: =@@(props.heatGroup+"_heatingsensorsvalveNexpansiontarget_Circuit_1")
          - component: Label
            config:
              style:
                left: 177px
                position: absolute
                top: 62px
              text: =@@(props.heatGroup+"_heatingevaporatorsNsensorstemperatureliquid_Circuit_0")
          - component: oh-icon
            config:
              icon: '=(@@(props.heatGroup+"_heatingboilerpumpsinternalcurrent")!="0
                %")?"oh:pump-on" : "oh:pump-off"'
              style:
                left: 320px
                position: absolute
                top: 66px
                width: 18px
          - component: Label
            config:
              style:
                left: 280px
                position: absolute
                top: 78px
              text: =@(props.heatGroup+"_heatingsensorsvolumetricFlowallengra")
          - component: Label
            config:
              style:
                left: 5px
                position: absolute
                top: 110px
              text: =@@(props.heatGroup+"_heatingprimaryCircuitfansNcurrent_Circuit_0")
          - component: oh-icon
            config:
              icon: oh:fan-circled
              state: =@(props.heatGroup+"_Compressors__N_Circuit_0_active")
              style:
                left: 5px
                position: absolute
                top: 122px
                width: 20px
          - component: oh-icon
            config:
              icon: oh:fan-circled
              state: =@(props.heatGroup+"_Compressors__N_Circuit_0_active")
              style:
                aleft: -15px
                left: 5px
                position: absolute
                top: 142px
                width: 20px
          - component: Label
            config:
              style:
                left: 78px
                position: absolute
                top: 141px
              text: =@(props.heatGroup+"_heatingcompressorsNsensorstemperatureoil_Circuit_0")
          - component: oh-icon
            config:
              height: 20px
              icon: oh:heizstab
              state: =@(props.heatGroup+"_heatingsecondaryHeatGenerator_active")
              style:
                left: 291px
                position: absolute
                top: 134px
          - component: oh-icon
            config:
              icon: '=(@@(props.heatGroup+"_heatingvalvesfourThreeWayposition")=="climateCircuitOne")?
                "oh:3wv-heat":
                (@@(props.heatGroup+"_heatingvalvesfourThreeWayposition")=="domesticHotWater")?
                "oh:3wv-dhw": "oh:3wv"'
              style:
                left: 318px
                opacity: 0.7
                position: absolute
                top: 145px
                width: 20px
          - component: Label
            config:
              style:
                left: 5px
                position: absolute
                top: 160px
              text: =@(props.heatGroup+"_heatingprimaryCircuitfansNcurrent_Circuit_1")
          - component: oh-icon
            config:
              icon: oh:compressor
              state: =@(props.heatGroup+"_Compressors__N_Circuit_0_active")
              style:
                left: 120px
                position: absolute
                top: 154px
                width: 18px
          - component: Label
            config:
              style:
                left: 282px
                position: absolute
                top: 155px
              text: =@@(props.heatGroup + "_heatingbufferCylindersensorstemperaturemain")
          - component: Label
            config:
              style:
                left: 346px
                position: absolute
                top: 155px
              text: =@(props.heatGroup + "_DHW_temperature_sensor")
          - component: Label
            config:
              style:
                left: 112px
                position: absolute
                top: 170px
              text: =@@(props.heatGroup + "_Current_compressor_speed_Circuit_0")
          - component: Label
            config:
              style:
                left: 149px
                position: absolute
                top: 170px
              text: =@(props.heatGroup+"_heatingcompressorsNsensorstemperatureinlet_Circuit_0")
          - component: Label
            config:
              style:
                left: 180px
                position: absolute
                top: 170px
              text: =@(props.heatGroup+"_heatingcompressorsNsensorspressureinlet_Circuit_0")+"
                bar"
          - component: oh-icon
            config:
              icon: =(@@(props.heatGroup+"_heatingprimaryCircuitvalvesfourThreeWay_active")=="OFF")?
                "oh:4wv-heat":"oh:4wv-cool"
              style:
                left: 222px
                opacity: 1
                position: absolute
                top: 183px
              width: 17px
          - component: Label
            config:
              style:
                left: 5px
                position: absolute
                top: 196px
              text: =@(props.heatGroup + "_Outside_temperature_sensor")
          - component: Label
            config:
              style:
                left: 115px
                position: absolute
                top: 196px
              text: =@(props.heatGroup +
                "_heatingcompressorsNsensorstemperatureoutlet_Circuit_0")
          - component: Label
            config:
              style:
                left: 158px
                position: absolute
                top: 196px
              text: =props.lang?'Pressure Missing':'Druck Fehlt'
          - component: Label
            config:
              style:
                left: 265px
                position: absolute
                top: 200px
              text: '="Ist:
                "+@(props.heatGroup+"_heatingsecondaryCircuitsensorstemperaturesupply")+"
                | Soll: "+
                @(props.heatGroup+"_heatingsensorstemperatureallengra")'
          - component: Label
            config:
              style:
                font-size: 10px
                font-weight: 600
                left: 10px
                position: absolute
                top: 230px
                white-space: pre
              text: "=props.lang?'Compressor starts : '+@(props.heatGroup+'_Compressor_statistics_Circuit_0_starts'):
                'Kompressor Starts : '+@(props.heatGroup+'_Compressor_statistics_Circuit_0_starts')"
          - component: Label
            config:
              style:
                font-size: 10px
                font-weight: 600
                left: 10px
                position: absolute
                top: 245px
                white-space: pre
              text: "=props.lang?'Compressor hours:  '+@(props.heatGroup+'_Compressor_statistics_Circuit_0_hours'):
                'Kompressor Stunden :  '+@(props.heatGroup+'_Compressor_statistics_Circuit_0_hours')"
          - component: oh-icon
            config:
              icon: '=(@(props.heatGroup+"_devicelockexternal_active")=="ON")?"oh:betrieb-evulock":
                (@@(props.heatGroup+"_Operating_mode__active_Circuit_1")=="heating")?"oh:betrieb-heat"
                : "oh:betrieb-cool"'
              style:
                left: 225px
                opacity: 0.8
                position: absolute
                top: 222px
              width: 24px
          - component: Label
            config:
              style:
                font-size: 10px
                font-weight: 600
                left: 220px
                position: absolute
                top: 245px
                white-space: pre
              text: '=(@(props.heatGroup+"_devicelockexternal_active")=="ON")?"EVU-Lock":
                (@@(props.heatGroup+"_Operating_mode__active_Circuit_1")=="heating")?"Heizen":"Standby"'
          - component: oh-button
            config:
              action: variable
              actionVariable: openHeatingcurve
              actionVariableValue: '=(vars.openHeatingcurve== "NULL") ? true :
                !(vars.openHeatingcurve)'
              borderColor: =props.tab1ColorScheme
              color: =props.tab1ColorScheme
              fill: true
              iconF7: slider_horizontal_3
              iconSize: 22px
              outline: true
              style:
                font-size: 12px
                border-radius: 5px
                left: 255px
                padding-left: 3px
                position: absolute
                text-transform: capitalize
                top: 225px
              text: =props.lang?'Heatingcurve':'Heizkurve'
              textColor: black
    - component: oh-context
      config:
        class:
          - no-margin
          - no-padding
        variables:
          circuit: =Number(JSON.parse(@(props.heatGroup+'_Circuits_enabled'))[0])
        visible: =(vars.openHeatingcurve)?true:false
      slots:
        default:
          - component: oh-context
            config:
              functions:
                tempHeatingcurve: "=(AT) =>
                  Math.round(#(props.heatGroup+'_Temperature_levels_Circuit_'+v\
                  ars.circuit+'_min')+
                  #(props.heatGroup+'_Heating_curve_Circuit_'+vars.circuit+'_sh\
                  ift')-
                  (#(props.heatGroup+'_Heating_curve_Circuit_'+vars.circuit+'_s\
                  lope')*
                  (AT-#(props.heatGroup+'_Temperature_levels_Circuit_'+vars.cir\
                  cuit+'_min'))* (1.4347+0.021*
                  (AT-#(props.heatGroup+'_Temperature_levels_Circuit_'+vars.cir\
                  cuit+'_min'))+ 247.9*0.000001*
                  ((AT-#(props.heatGroup+'_Temperature_levels_Circuit_'+vars.ci\
                  rcuit+'_min'))*
                  (AT-#(props.heatGroup+'_Temperature_levels_Circuit_'+vars.cir\
                  cuit+'_min'))))))>
                  #(props.heatGroup+'_Temperature_levels_Circuit_'+vars.circuit\
                  +'_max')?
                  #(props.heatGroup+'_Temperature_levels_Circuit_'+vars.circuit\
                  +'_max'):
                  Math.round(#(props.heatGroup+'_Temperature_levels_Circuit_'+v\
                  ars.circuit+'_min')+
                  #(props.heatGroup+'_Heating_curve_Circuit_'+vars.circuit+'_sh\
                  ift')-
                  (#(props.heatGroup+'_Heating_curve_Circuit_'+vars.circuit+'_s\
                  lope')*
                  (AT-#(props.heatGroup+'_Temperature_levels_Circuit_'+vars.cir\
                  cuit+'_min'))*
                  (1.4347+0.021*(AT-#(props.heatGroup+'_Temperature_levels_Circ\
                  uit_'+vars.circuit+'_min'))+
                  247.9*0.000001*((AT-#(props.heatGroup+'_Temperature_levels_Ci\
                  rcuit_'+vars.circuit+'_min'))*
                  (AT-#(props.heatGroup+'_Temperature_levels_Circuit_'+vars.cir\
                  cuit+'_min'))))))"
            slots:
              default:
                - component: oh-chart
                  config:
                    chartType: year
                    future: false
                    height: 165px
                  slots:
                    grid:
                      - component: oh-chart-grid
                        config:
                          bottom: 35
                          containLabel: false
                          height: 115
                          left: 30
                          right: 5
                          show: true
                          top: 20
                    series:
                      - component: oh-data-series
                        config:
                          color: red
                          data:
                            - =fn.tempHeatingcurve(20)
                            - =fn.tempHeatingcurve(10)
                            - =fn.tempHeatingcurve(0)
                            - =fn.tempHeatingcurve(-10)
                            - =fn.tempHeatingcurve(-20)
                            - =fn.tempHeatingcurve(-30)
                          label:
                            color: "#000"
                            fontSize: 9
                            formatter: =(v)=>v.data+'°C'
                            bformatter: =props.lang?(value)=>Math.round(((value.data*1.8)+32))+'°':'{c}°C'
                            position: inside
                            show: true
                          name: =props.lang?'Flow temperature':'Vorlauftemperatur'
                          showBackground: true
                          symbol: emptycircle
                          symbolSize: 25
                          type: line
                    title:
                      - component: oh-chart-label
                        config:
                          left: 50%
                          show: true
                          text: "=props.lang?
                            'Circuits: '+JSON.parse(@(props.heatGroup+'_Circuits_enabled')).length+ ' - Heatingcurve:
                            '+@(props.heatGroup+'_Circuit_name_Circuit_'+vars.circuit):
                            'Heizkreise: '+JSON.parse(@(props.heatGroup+'_Circuits_enabled')).length+ ' - Heizkurve:
                            '+@(props.heatGroup+'_Circuit_name_Circuit_'+vars.circuit):"
                          textAlign: center
                          textStyle:
                            fontSize: 14px
                    tooltip:
                      - component: oh-chart-tooltip
                        config:
                          confine: true
                          show: false
                          formatter: =props.lang?(value)=>Math.round(((value.data*1.8)+32))+'°':'{c}°C'
                    xAxis:
                      - component: oh-category-axis
                        config:
                          aboundaryGap: false
                          axisLabel:
                            fontSize: 10
                            fontWeight: 100
                          data:
                            - =props.lang?'68°':'20°C'
                            - =props.lang?'50°':'10°C'
                            - =props.lang?'32°':'0°C'
                            - =props.lang?'14°':'-10°C'
                            - =props.lang?'-4°':'-20°C'
                            - =props.lang?'-22°':'-30°C'
                          name: "=props.lang?'Outside temperature':'Aussentemperatur'"
                          nameGap: 17
                          nameLocation: center
                    yAxis:
                      - component: oh-value-axis
                        config:
                          axisLabel:
                            fontSize: 10
                            fontWeight: 100
                            margin: 3
                            aformatter: "=props.lang?'{value} * 1.8 + 32':'{value}:"
                            bformatter: =props.lang?(value)=>Math.round(((value.data*1.8)+32)):'{value}'
                            cformatter: =props.lang?(params)=>Math.round(((params.value*1.8)+32)):{c}
                            dformatter: =!props.lang?(params)=>(params.value*1.8)+32:({c}*1.8)+32
                          max: 60
                          min: 0
                          name: =props.lang?'Flow temperature':'Vorlauftemperatur'
                          nameGap: 15
                          nameLocation: center
                          nameRotate: 90
                          nameTextStyle:
                            align: center
                            fontSize: 14
                            fontWeight: 100
                - component: f7-block
                  config:
                    class:
                      - no-padding
                    style:
                      column-gap: 5px
                      display: grid
                      font-size: 13px
                      font-weight: 600
                      grid-template-columns: repeat(3)
                      line-height: 12px
                      margin: 2px 0px 0px 10px
                  slots:
                    default:
                      - component: Label
                        config:
                          style:
                            grid-column-start: 1
                            text-align: left
                          text: =props.lang?'Heating Slope':'Neigung'
                      - component: Label
                        config:
                          style:
                            text-align: left
                          text: =props.lang?'Heating Shift':'Niveau'
                      - component: Label
                        config:
                          style:
                            text-align: left
                          text: =@(props.heatGroup+'_Circuit_name_Circuit_'+vars.circuit)
                      - component: oh-stepper
                        config:
                          buttonsOnly: false
                          fill: true
                          item: =(props.heatGroup+'_Heating_curve_Circuit_'+vars.circuit+'_slope')
                          max: 2.4
                          min: 0.2
                          small: true
                          step: 0.1
                          style:
                            --f7-stepper-button-bg-color: =props.tab1ColorScheme
                            margin-top: 5px
                      - component: oh-stepper
                        config:
                          buttonsOnly: false
                          fill: true
                          item: =(props.heatGroup+'_Heating_curve_Circuit_'+vars.circuit+'_shift')
                          max: 10
                          min: 0
                          small: true
                          step: 1
                          style:
                            --f7-stepper-button-bg-color: =props.tab1ColorScheme
                            margin-top: 5px
                      - component: oh-stepper
                        config:
                          buttonsOnly: false
                          fill: true
                          small: true
                          variable: circuit
                          max: =JSON.parse(@(props.heatGroup+'_Circuits_enabled')).length
                          min: =vars.circuit
                          step: 1
                          value: =vars.circuit
                          style:
                            --f7-stepper-button-bg-color: =props.tab1ColorScheme
                            margin-top: 5px
                      - component: Label
                        config:
                          style:
                            grid-column-start: 1
                            margin-top: 5px
                            text-align: left
                          text: =props.lang?'Min. Flowtemp.':'Min. Vorlauftemp.'
                      - component: Label
                        config:
                          style:
                            margin-top: 5px
                            text-align: left
                          text: =props.lang?'Max. Flowtemp.':'Max. Vorlauftemp.'
                      - component: Label
                        config:
                          style:
                            text-align: left
                      - component: oh-stepper
                        config:
                          buttonsOnly: false
                          fill: true
                          item: =(props.heatGroup+'_Temperature_levels_Circuit_'+vars.circuit+'_min')
                          max: 30
                          min: 1
                          small: true
                          step: 1
                          style:
                            --f7-stepper-button-bg-color: =props.tab1ColorScheme
                            margin-top: 5px
                      - component: oh-stepper
                        config:
                          buttonsOnly: false
                          fill: true
                          item: =(props.heatGroup+'_Temperature_levels_Circuit_'+vars.circuit+'_max')
                          max: 70
                          min: 10
                          small: true
                          step: 1
                          style:
                            --f7-stepper-button-bg-color: =props.tab1ColorScheme
                            margin-top: 5px
                      - component: oh-button
                        config:
                          action: variable
                          actionVariable: openHeatingcurve
                          actionVariableValue: '=(vars.openHeatingcurve== "NULL") ? true :
                            !(vars.openHeatingcurve)'
                          borderColor: =props.tab1ColorScheme
                          color: =props.tab1ColorScheme
                          fill: true
                          outline: true
                          style:
                            grid-column-start: 3
                            grid-row-start: 4
                            width: 110px
                            height: 28px
                            margin-top: 5px
                          text: =t('dialogs.back')
                          textColor: black
