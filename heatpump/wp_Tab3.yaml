uid: wp_Tab3
tags: []
props:
  parameters:
    - context: item
      description: group containing all heating-items
      label: heating group
      name: heatGroup
      required: false
      type: TEXT
    - context: Text
      label: Language
      name: lang
      required: true
      type: TEXT
    - context: Text
      label: ColorScheme
      name: tab3ColorScheme
      required: true
      type: TEXT
    - context: Text
      default: rgb(255, 165, 0)
      label: Hex ColorScheme
      name: hexColorScheme_tab3
      required: true
      type: TEXT
  parameterGroups: []
timestamp: Feb 23, 2026, 10:48:27 PM
component: f7-block
config:
  class:
    - margin-horizontal-half
    - no-margin-vertical
    - no-padding
slots:
  default:
    - component: f7-block
      config:
        class:
          - no-padding
          - text-align-center
        style:
          display: grid
          font-size: 11px
          font-weight: 700
          gap: 5px
          grid-template-columns: repeat(3, 1fr) 55px 55px
          line-height: 12px
          margin: 2px 0px 2px 0px
      slots:
        default:
          - component: Label
            config:
              text: =props.lang?'Betriebsart':'OperatingMode'
          - component: Label
            config:
              text: =props.lang?'Temperatur':'Temperature'
          - component: Label
            config:
              text: =props.lang?'Zeitprogramm':'Schedule'
          - component: Label
            config:
              text: =props.lang?'Hysterese':'Hysteresis'
          - component: Label
            config:
              text: Hygiene
          - component: oh-button
            config:
              action: options
              actionItem: =props.heatGroup+"_heatingdhwoperatingmodesactive"
              class:
                - Betriebsart
              outline: true
              small: true
              style:
                background-color: gray
                border-radius: 4px
                borderColor: =props.tab3ColorScheme
                color: black
                display: flex
                font-size: 11px
                padding-left: 3px
                padding-right: 3px
                text-transform: uppercase
            slots:
              default:
                - component: oh-icon
                  config:
                    color: white
                    icon: '=(@(props.heatGroup+"_heatingdhwoperatingmodesactive")=="Eco") ?
                      "iconify:mdi:leaf" :
                      (@(props.heatGroup+"_heatingdhwoperatingmodesactive")=="Komfort")
                      ? "iconify:mdi:heart" : "iconify:mdi:power"'
                    style:
                      font-size: 16px
                      padding-bottom: 2px
                - component: Label
                  config:
                    style:
                      flex-grow: 1
                      font-size: 12px
                      text-align: right
                      text-transform: capitalize
                    text: =(@(props.heatGroup+"_heatingdhwoperatingmodesactive"))
                - component: oh-icon
                  config:
                    height: 12px
                    icon: f7:chevron_down
          - component: oh-button
            config:
              action: popover
              class:
                - Temperatur
              fontSize: 11px
              outline: true
              popoverOpen: .DHW_main_temperature
              small: true
              style:
                background: url("/static/waermepumpe/ww-heat1.svg")
                background-color: gray
                background-position-x: 10px
                background-repeat: no-repeat
                background-size: 20px
                border-radius: 4px
                borderColor: =props.tab3ColorScheme
                color: black
                display: flex
                justify-content: right
                padding-left: 5px
                padding-right: 3px
            slots:
              default:
                - component: f7-chip
                  config:
                    style:
                      --f7-chip-bg-color: hsl(20,100%,60%)
                      height: 16px
                      padding: 2px
                      width: 2px
                - component: Label
                  config:
                    style:
                      flex-grow: 1
                      fontSize: 12px
                      text-align: right
                    text: =#(props.heatGroup+"_DHW_main_temperature")+"Â°"
                - component: oh-icon
                  config:
                    height: 12px
                    icon: f7:chevron_down
                - component: f7-popover
                  config:
                    backdrop: true
                    class: DHW_main_temperature
                    closeByBackdropClick: true
                    closeByOutsideClick: true
                    closeOnEscape: true
                    style:
                      --f7-popover-border-radius: 5px
                      --f7-popover-width: 180px
                  slots:
                    default:
                      - component: widget:wp_value_setter
                        config:
                          item: =props.heatGroup+"_DHW_main_temperature"
                          type: =props.lang?'Wunsch Temperatur Warmwasser':'Desired Temperature DHW'
          - component: oh-button
            config:
              action: variable
              actionVariable: Zirk
              actionVariableValue: '=(vars.Zirk == "null") ? true : !(vars.Zirk)'
              class:
                - Zirkulation
              outline: true
              small: true
              style:
                background-color: gray
                border-radius: 4px
                borderColor: =props.tab3ColorScheme
                color: black
                display: flex
                font-size: 11px
                padding-left: 2px
                padding-right: 3px
                text-transform: uppercase
            slots:
              default:
                - component: oh-icon
                  config:
                    color: white
                    icon: oh:ww-zirkulation-w
                    style:
                      padding-bottom: 2px
                      width: 18px
                - component: Label
                  config:
                    style:
                      flex-grow: 1
                      fontSize: 12px
                      text-align: right
                    text: "=(vars.Zirk)? props.lang?'WW':'DHW': props.lang?'Zirk':'Circ'"
                - component: oh-icon
                  config:
                    height: 12px
                    icon: f7:chevron_down
          - component: oh-button
            config:
              action: popup
              class:
                - Hysterese
                - justify-content-space-between
              outline: true
              popupOpen: .popup-hysterese-warn
              small: true
              style:
                background-color: gray
                border-radius: 4px
                borderColor: =props.tab3ColorScheme
                color: black
                display: flex
                font-size: 11px
                padding-left: 2px
                padding-right: 3px
                text-transform: uppercase
            slots:
              default:
                - component: oh-icon
                  config:
                    color: white
                    icon: oh:limit-upper
                    style:
                      padding-bottom: 2px
                      width: 18px
                - component: oh-icon
                  config:
                    height: 12px
                    icon: f7:chevron_down
                - component: f7-popup
                  config:
                    backdrop: false
                    class: popup-hysterese-warn
                    closeByBackdropClick: false
                    closeByOutsideClick: false
                    closeOnEscape: false
                    style:
                      --f7-popup-tablet-border-radius: 5px
                      --f7-popup-tablet-height: 225px
                      --f7-popup-tablet-width: 290px
                  slots:
                    default:
                      - component: widget:wp_hysterese_warn
                        config:
                          group: =props.heatGroup
                          lang: =props.lang
                          hystereseWarnColorScheme: =props.tab3ColorScheme
          - component: oh-button
            config:
              action: rule
              actionRule: Heatpump_Hygiene
              actionRuleContext:
                group: =props.heatGroup
                task: populate
              class:
                - Hygiene
                - justify-content-space-between
              outline: true
              small: true
              style:
                background-color: gray
                border-radius: 4px
                borderColor: =props.tab3ColorScheme
                color: black
                display: flex
                font-size: 11px
                padding-left: 0px
                padding-right: 3px
                text-transform: uppercase
            slots:
              default:
                - component: oh-link
                  config:
                    action: popup
                    actionModal: widget:wp_hygiene
                    actionModalConfig:
                      group: =props.heatGroup
                      targetTemp: _DHW_temperature_hygiene
                      lang: =props.lang
                      hygieneColorScheme: =props.tab3ColorScheme
                    class:
                      - display-flex
                      - justify-content-space-between
                      - text-align-right
                      - align-items-right
                    popupOpen: .Hygienepopup
                    style:
                      width: 100%
                  slots:
                    default:
                      - component: oh-icon
                        config:
                          color: white
                          icon: oh:ww-drop
                          style:
                            padding-bottom: 1px
                            width: 20px
                      - component: oh-icon
                        config:
                          color: black
                          height: 12px
                          icon: f7:chevron_down
    - component: f7-block
      config:
        class:
          - no-margin-vertical
          - no-padding
          - text-align-center
        key: =@(props.heatGroup+"_DHW_schedule")
        style:
          display: grid
          font-size: 12px
          font-weight: 700
          gap: 3px
          grid-template-columns: 24px repeat(4, 1fr)
          line-height: 13px
        visible: =(vars.Zirk)?false:true
      slots:
        default:
          - component: Label
            config:
              style:
                grid-column: 1 / span 5
              text: =props.lang?'Zeitprogramm Warmwasser':'Schedule DomesticHotWater'
          - component: widget:wp_timeaxis
          - component: oh-repeater
            config:
              class:
                - dayOfWeek
              for: weekDay
              fragment: true
              in:
                - mon
                - tue
                - wed
                - thu
                - fri
                - sat
                - sun
              map: ({"key":loop.weekDay,"value":JSON.parse(@@("ViessmannWaermepumpe_DHW_schedule"))[loop.weekDay]})
              sourceType: array
            slots:
              default:
                - component: Label
                  config:
                    class:
                      - objectlabel
                    style:
                      grid-column-start: 1
                      line-height: 24px
                      text-transform: capitalize
                    text: "=props.lang?
                      ({mon:'Mo',tue:'Di',wed:'Mi',thu:'Do',fri:'Fr',sat:'Sa',sun:\
                      'So'})[loop.weekDay.key]: loop.weekDay.key"
                - component: f7-segmented
                  config:
                    class:
                      - segmented
                    style:
                      --f7-button-border-radius: 2px
                      --f7-button-font-size: 8px
                      --f7-button-font-weight: 300
                      --f7-button-outline-border-width: 1px
                      --f7-button-padding-horizontal: 0px
                      grid-column-start: span 4
                      height: 24px
                  slots:
                    default:
                      - component: oh-button
                        config:
                          action: rule
                          actionRule: Heatpump_Populate_ProxyItems
                          actionRuleContext:
                            group: =props.heatGroup
                            timesArray: =loop.weekDay.value
                            whichSched: WW
                            dayOfWeek: =loop.weekDay.key
                          outline: true
                          style:
                            --f7-button-border-color: =props.tab3ColorScheme
                            height: 22px
                        slots:
                          default:
                            - component: oh-repeater
                              config:
                                class:
                                  - programModes
                                for: pM
                                fragment: true
                                in: =loop.weekDay.value
                                rangeStart: 0
                                rangeStop: =(loop.pM_source.length)-1
                                sourceType: array
                              slots:
                                default:
                                  - component: oh-repeater
                                    config:
                                      for: pT
                                      fragment: true
                                      rangeStart: 0
                                      rangeStop: =(loop.pM_source.length*2)
                                      sourceType: range
                                    slots:
                                      default:
                                        - component: oh-context
                                          config:
                                            constants:
                                              cN: hsl(0,100%,80%)
                                              cOff: hsl(0,0%,50%)
                                              cOn: hsl(20,100%,60%)
                                              end: '=(loop.pT==0)?Number(0).toString(): Math.round(
                                                Number((loop.pM_source[(Math.ceil(loop.pT/2)-1)]["end"].split(":")[0])*60)+Number((loop.pM_source[(Math.ceil(loop.pT/2)-1)]["end"].split(":")[1])))'
                                              mode: =((loop.pT_idx/2).toString()-Math.floor((loop.pT_idx/2).toString()))?loop.pM_source[Math.floor(loop.pT_idx/2)]["mode"]:"standby"
                                              start: '=((loop.pT)==(loop.pM_source.length*2))?Number(24*60):
                                                Math.round(Number((loop.pM_source[Math.floor(loop.pT/2)]["start"].split(":")[0])*60)+Number((loop.pM_source[Math.floor(loop.pT/2)]["start"].split(":")[1])))'
                                          slots:
                                            default:
                                              - component: oh-link
                                                config:
                                                  action: sheet
                                                  actionModal: widget:wp_schedule
                                                  actionModalConfig:
                                                    heatGroup: =props.heatGroup
                                                    dayOfWeek: =loop.weekDay.key
                                                    timesArray: =loop.weekDay.value
                                                    scheduleType: WW
                                                    scheduleColorScheme: =props.tab3ColorScheme
                                                  style:
                                                    background: =(const.mode=="on")?"url("+"/static/waermepumpe/ww-heat1"+".svg)":""
                                                    background-color: =(const.mode=="on")?const.cOn:const.cOff
                                                    background-position: center
                                                    background-repeat: no-repeat
                                                    background-size: 20px
                                                    borderColor: =props.tab3ColorScheme
                                                    color: black
                                                    font-size: 12px
                                                    height: 22px
                                                    width: =((loop.pT%2)=="0")?((const.start-const.end)/1440*100)+"%":((const.end-const.start)/1440*100)+"%"
                                                  visible: =(loop.pM_idx==0)
    - component: f7-block
      config:
        class:
          - no-margin-vertical
          - no-padding
          - text-align-center
        key: =@(props.heatGroup+"_DHW_circulation_pump__schedule")
        style:
          display: grid
          font-size: 12px
          font-weight: 700
          gap: 3px
          grid-template-columns: 24px repeat(4, 1fr)
          line-height: 13px
        visible: =(vars.Zirk)?true:false
      slots:
        default:
          - component: Label
            config:
              style:
                grid-column: 1 / span 5
              text: =props.lang?'Zeitprogramm Zirkulation':'Schedule circulation'
          - component: widget:wp_timeaxis
          - component: oh-repeater
            config:
              class:
                - dayOfWeek
              for: weekDay
              fragment: true
              in:
                - mon
                - tue
                - wed
                - thu
                - fri
                - sat
                - sun
              map: ({"key":loop.weekDay,"value":JSON.parse(@@("ViessmannWaermepumpe_DHW_circulation_pump__schedule"))[loop.weekDay]})
              sourceType: array
            slots:
              default:
                - component: Label
                  config:
                    class:
                      - objectlabel
                    style:
                      grid-column-start: 1
                      line-height: 24px
                      text-transform: capitalize
                    text: "=props.lang?
                      ({mon:'Mo',tue:'Di',wed:'Mi',thu:'Do',fri:'Fr',sat:'Sa',sun:\
                      'So'})[loop.weekDay.key]: loop.weekDay.key"
                - component: f7-segmented
                  config:
                    class:
                      - segmented
                    style:
                      --f7-button-border-radius: 2px
                      --f7-button-font-size: 8px
                      --f7-button-font-weight: 300
                      --f7-button-outline-border-width: 2px
                      --f7-button-padding-horizontal: 0px
                      --f7-button-text-color: var(--f7-theme-color)
                      grid-column-start: span 4
                      height: 24px
                  slots:
                    default:
                      - component: oh-button
                        config:
                          action: rule
                          actionRule: Heatpump_Populate_ProxyItems
                          actionRuleContext:
                            group: =props.heatGroup
                            timesArray: =loop.weekDay.value
                            whichSched: ZI
                            dayOfWeek: =loop.weekDay.key
                          outline: true
                          style:
                            --f7-button-border-color: =props.tab3ColorScheme
                            height: 22px
                        slots:
                          default:
                            - component: oh-repeater
                              config:
                                class:
                                  - programModes
                                for: pM
                                fragment: true
                                in: =loop.weekDay.value
                                rangeStart: 0
                                rangeStop: =(loop.pM_source.length)-1
                                sourceType: array
                              slots:
                                default:
                                  - component: oh-repeater
                                    config:
                                      for: pT
                                      fragment: true
                                      rangeStart: 0
                                      rangeStop: =(loop.pM_source.length*2)
                                      sourceType: range
                                    slots:
                                      default:
                                        - component: oh-context
                                          config:
                                            constants:
                                              cN: hsl(0,100%,80%)
                                              cOff: hsl(0,0%,50%)
                                              cOn: hsl(20,100%,60%)
                                              end: '=(loop.pT==0)?Number(0).toString(): Math.round(
                                                Number((loop.pM_source[(Math.ceil(loop.pT/2)-1)]["end"].split(":")[0])*60)+Number((loop.pM_source[(Math.ceil(loop.pT/2)-1)]["end"].split(":")[1])))'
                                              mode: =((loop.pT_idx/2).toString()-Math.floor((loop.pT_idx/2).toString()))?loop.pM_source[Math.floor(loop.pT_idx/2)]["mode"]:"standby"
                                              start: '=((loop.pT)==(loop.pM_source.length*2))?Number(24*60):
                                                Math.round(Number((loop.pM_source[Math.floor(loop.pT/2)]["start"].split(":")[0])*60)+Number((loop.pM_source[Math.floor(loop.pT/2)]["start"].split(":")[1])))'
                                          slots:
                                            default:
                                              - component: oh-link
                                                config:
                                                  action: sheet
                                                  actionModal: widget:wp_schedule
                                                  actionModalConfig:
                                                    heatGroup: =props.heatGroup
                                                    dayOfWeek: =loop.weekDay.key
                                                    timesArray: =loop.weekDay.value
                                                    scheduleType: ZI
                                                    scheduleColorScheme: =props.tab3ColorScheme
                                                  outline: true
                                                  small: true
                                                  style:
                                                    background: =(const.mode=="on")?"url(/static/waermepumpe/ww-zirkulation-w.svg)":""
                                                    background-color: =(const.mode=="on")?const.cOn:const.cOff
                                                    background-position: center
                                                    background-repeat: no-repeat
                                                    background-size: 20px
                                                    borderColor: =props.tab3ColorScheme
                                                    color: white
                                                    font-color: white
                                                    font-size: 12px
                                                    height: 22px
                                                    width: =((loop.pT%2)=="0")?((const.start-const.end)/1440*100)+"%":((const.end-const.start)/1440*100)+"%"
                                                  visible: =(loop.pM_idx==0)
