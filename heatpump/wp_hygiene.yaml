uid: wp_hygiene
tags: []
props:
  parameters:
    - context: item
      adefault: ViessmannWaermepumpe
      description: Item to control
      label: Gruppe der Waermepumpe
      name: group
      required: false
      type: TEXT
    - context: item
      default: _hygieneRhythm
      description: Proxy-Item für den Rhythmus (Täglich, Wöchentlich)
      label: Rhythm Proxy-Item
      name: rhythm
      required: false
      type: TEXT
    - context: item
      default: _hygieneWeekday
      description: Proxy-Item für den Tag (Mon, Tue, ...)
      label: Weekday Proxy-Item
      name: rhythmDay
      required: false
      type: TEXT
    - context: item
      default: _hygieneStartHour
      description: Start hour for the Schedule
      label: Start-Hour Proxy-Item
      name: startHour
      required: false
      type: TEXT
    - context: item
      default: _hygieneStartMinute
      description: Start minute for the Schedule
      label: Start-Minute Proxy-Item
      name: startMinute
      required: false
      type: TEXT
    - context: item
      default: _DHW_temperature_hygiene
      description: Die Zieltemperatur welche erreicht werden soll beim desinfizieren.
      label: Zieltemperatur
      name: targetTemp
      required: false
      type: TEXT
    - context: rule
      default: Heatpump_Hygiene
      description: Rule zum belegen der Proxy-Items und speichern der Werte darin in
        der Waermepumpe
      label: Rule for Value handling
      name: rule
      required: false
      type: TEXT
    - context: Text
      label: hygieneColorScheme
      name: hygieneColorScheme
      required: false
      type: TEXT
  parameterGroups: []
timestamp: Feb 14, 2026, 11:25:37 PM
component: f7-block
config:
  class:
    - margin-half
  label: Hygiene Einstellungen
  style:
    x--f7-popup-tablet-height: 670px
  stylesheet: |
    div.item-content {
      padding: 4px
    }
slots:
  default:
    - component: f7-row
      config:
        style:
          background: lightgray
          border-color: =props.hygieneColorScheme
          border-radius: 5px
          border-style: solid
          border-width: 2px
          padding: 5px 10px
      slots:
        default:
          - component: f7-col
            config:
              style:
                flex-grow: 1
            slots:
              default:
                - component: Label
                  config:
                    style:
                      font-size: 15px
                      font-weight: 600
                      text-align: left
                    text: Hygieneprogramm
                - component: Label
                  config:
                    text: '="Legionellenschutz: "+@((props.group)+"_heatingdhwhygiene_enabled")'
          - component: f7-col
            config:
              class:
                - display-flex
                - flex-direction-column
                - padding-vertical-half
              style:
                width: 30px
            slots:
              default:
                - component: oh-button
                  config:
                    action: toggle
                    actionCommand: ON
                    actionCommandAlt: OFF
                    actionItem: =props.group+'_heatingdhwhygiene_enabled'
                    color: =(@(props.group+'_heatingdhwhygiene_enabled')=='ON')?'green':'red'
                    fill: true
                    iconF7: power
                    iconSize: 24px
                    outline: false
                    raised: true
          - component: f7-col
            config:
              class:
                - display-flex
                - flex-direction-column
                - align-self-center
              style:
                width: auto
              visible: =(((@(props.group+props.rhythm)=="Täglich")&&(@(props.group+props.rhythmDay)!="Sun,
                Mon, Tue, Wed, Thu, Fri, Sat"))||
                ((@(props.group+props.rhythm)=="Wöchentlich")&&(@(props.group+props.rhythmDay)=="Sun,
                Mon, Tue, Wed, Thu, Fri, Sat"))||
                (@(props.group+props.rhythmDay)!=@(props.group+'_heatingdhwhygienetrigger_weekday'))
                ||
                (@(props.group+props.startHour)!=@(props.group+'_heatingdhwhygienetrigger_startHour'))
                ||
                (@(props.group+props.startMinute)!=@(props.group+'_heatingdhwhygienetrigger_startMinute')))?true:false
            slots:
              default:
                - component: oh-button
                  config:
                    action: rule
                    actionRule: =props.rule
                    actionRuleContext:
                      group: =props.group
                      task: save
                    color: =props.hygieneColorScheme
                    popupClose: .modal-in
                    text: Speichern
    - component: f7-row
      config:
        class:
          - margin-vertical-half
      slots:
        default:
          - component: f7-col
            config:
              style:
                width: 24px
            slots:
              default:
                - component: oh-icon
                  config:
                    color: =props.hygieneColorScheme
                    icon: f7:info_circle_fill
                    width: 22px
          - component: f7-col
            config:
              style:
                flex-grow: 1
            slots:
              default:
                - component: Label
                  config:
                    style:
                      font-size: 14px
                      text-align: left
                    text: Während dieses Programms wird die Temperatur erhöht, um die Entstehung von
                      Bakterien zu verhindern. Es wird nicht empfohlen, warmes
                      Wasser zu verwenden, während die Funktion läuft.
    - component: f7-row
      slots:
        default:
          - component: f7-col
            slots:
              default:
                - component: Label
                  config:
                    style:
                      font-weight: 600
                    text: FREQUENZ WÄHLEN
    - component: f7-row
      slots:
        default:
          - component: f7-col
            slots:
              default:
                - component: f7-row
                  slots:
                    default:
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                        slots:
                          default:
                            - component: oh-button
                              config:
                                action: toggle
                                actionCommand: Täglich
                                actionCommandAlt: Wöchentlich
                                actionItem: =(props.group+props.rhythm)
                                color: =props.hygieneColorScheme
                                large: true
                                outline: true
                                raised: true
                                style:
                                  font-size: 20px
                                  margin: 0px
                                  text-transform: capitalize
                                text: =(@(props.group+props.rhythm)=="NULL")?"?":@(props.group+props.rhythm)
                      - component: f7-col
                        config:
                          style:
                            width: 10%
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                        slots:
                          default:
                            - component: oh-button
                              config:
                                color: =props.hygieneColorScheme
                                large: true
                                outline: true
                                raised: true
                                style:
                                  color: =props.hygieneColorScheme
                                  font-size: 20px
                                  font-weight: 600
                                  text-transform: capitalize
                                text: =(@(props.group+props.rhythm)=="Wöchentlich")?
                                  (@(props.group+props.rhythmDay)=="Sun, Mon,
                                  Tue, Wed, Thu, Fri, Sat")||
                                  (@(props.group+props.rhythmDay)=="NULL")?
                                  "Montag":(@@(props.group+props.rhythmDay)):"Täglich"
                                visible: =(@(props.group+props.rhythm)=="Täglich")?true:false
                            - component: oh-button
                              config:
                                action: options
                                actionItem: =props.group+props.rhythmDay
                                actionOptions: Mon=Montag, Tue=Dienstag, Wed=Mittwoch, Thu=Donnerstag,
                                  Fri=Freitag, Sat=Samstag, Sun=Sonntag
                                btext: =@(props.group+props.rhythmDay)
                                color: =props.hygieneColorScheme
                                large: true
                                outline: true
                                raised: true
                                style:
                                  font-size: 20px
                                  font-weight: 600
                                  margin: 0px
                                  text-transform: capitalize
                                text: =(@(props.group+props.rhythm)=="Wöchentlich")?
                                  (@(props.group+props.rhythmDay)=="Sun, Mon,
                                  Tue, Wed, Thu, Fri, Sat")||
                                  (@(props.group+props.rhythmDay)=="NULL")?
                                  "Montag":@(props.group+props.rhythmDay):"Täglich"
                                visible: =(@(props.group+props.rhythm)=="Täglich")?false:true
    - component: f7-row
      slots:
        default:
          - component: f7-col
            slots:
              default:
                - component: Label
                  config:
                    style:
                      font-weight: 600
                    text: START-ZEIT WÄHLEN
                - component: f7-row
                  config: {}
                  slots:
                    default:
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                        slots:
                          default:
                            - component: oh-button
                              config:
                                action: command
                                actionCommand: =(#(props.group+props.startHour)<23)?(#(props.group+props.startHour)+1):(#(props.group+props.startHour))
                                actionItem: =(props.group+props.startHour)
                                style:
                                  --f7-button-text-color: var(--f7-text-color)
                                  font-family: u2400
                                  font-size: 150%
                                text: ▲
                      - component: f7-col
                        config:
                          style:
                            width: 10%
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                        slots:
                          default:
                            - component: oh-button
                              config:
                                action: command
                                actionCommand: =(#(props.group+props.startMinute)<50)?(#(props.group+props.startMinute)+10):(#(props.group+props.startMinute))
                                actionItem: =(props.group+props.startMinute)
                                style:
                                  --f7-button-text-color: var(--f7-text-color)
                                  font-family: u2400
                                  font-size: 150%
                                text: ▲
                - component: f7-row
                  slots:
                    default:
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                        slots:
                          default:
                            - component: oh-label-card
                              config:
                                label: "=((#(props.group+props.startHour) === 'NULL') || (!props.group)) ? '?':
                                  (#(props.group+props.startHour)).toString().l\
                                  ength==1?
                                  '0'+(#(props.group+props.startHour)).toString\
                                  ():
                                  (#(props.group+props.startHour)).toString()"
                                style:
                                  font-size: 20%
                                  margin: 0px
                                  white-space: nowrap
                      - component: f7-col
                        config:
                          style:
                            width: 10%
                        slots:
                          default:
                            - component: Label
                              config:
                                style:
                                  font-size: 200%
                                  text-align: center
                                text: ":"
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                        slots:
                          default:
                            - component: oh-label-card
                              config:
                                label: "=((#(props.group+props.startMinute) === 'NULL') || (!props.group))?'?':
                                  ((#(props.group+props.startMinute)).toString(\
                                  ).length)==1?
                                  '0'+(#(props.group+props.startMinute)).toStri\
                                  ng():
                                  (#(props.group+props.startMinute)).toString()"
                                style:
                                  font-size: 40%
                                  margin: 0px
                                  white-space: nowrap
                - component: f7-row
                  slots:
                    default:
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                        slots:
                          default:
                            - component: oh-button
                              config:
                                action: command
                                actionCommand: =(#(props.group+props.startHour)>0)?(#(props.group+props.startHour)==1)?"0":(#(props.group+props.startHour)-1):"0"
                                actionItem: =(props.group+props.startHour)
                                style:
                                  --f7-button-text-color: var(--f7-text-color)
                                  font-family: u2400
                                  font-size: 150%
                                text: ▼
                      - component: f7-col
                        config:
                          style:
                            width: 10%
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                        slots:
                          default:
                            - component: oh-button
                              config:
                                action: command
                                actionCommand: =(#(props.group+props.startMinute)>0)?(#(props.group+props.startMinute)=="10")?"0":(#(props.group+props.startMinute)-10):"0"
                                actionItem: =(props.group+props.startMinute)
                                style:
                                  --f7-button-text-color: var(--f7-text-color)
                                  font-family: u2400
                                  font-size: 150%
                                text: ▼
                - component: f7-row
                  config: {}
                  slots:
                    default:
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                      - component: f7-col
                        config:
                          style:
                            width: 10%
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                        slots:
                          default:
                            - component: oh-button
                              config:
                                action: command
                                actionCommand: =(#(props.group+props.targetTemp)<75)?(#(props.group+props.targetTemp)+1):(#(props.group+props.targetTemp)+0)
                                actionItem: =props.group+props.targetTemp
                                style:
                                  --f7-button-text-color: var(--f7-text-color)
                                  font-family: u2400
                                  font-size: 150%
                                text: ▲
                - component: f7-row
                  config:
                    class:
                      - justify-items-center
                  slots:
                    default:
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                        slots:
                          default:
                            - component: oh-label-card
                              config:
                                label: Zieltemperatur
                                style:
                                  font-size: 20%
                                  margin: 0px
                      - component: f7-col
                        config:
                          style:
                            width: 10%
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                        slots:
                          default:
                            - component: oh-label-card
                              config:
                                label: =((@(props.group+props.targetTemp) === 'NULL') || (!props.group ||
                                  props.time=='')) ?
                                  '?':@(props.group+props.targetTemp)
                                style:
                                  font-size: 40%
                                  margin: 0px
                - component: f7-row
                  slots:
                    default:
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                      - component: f7-col
                        config:
                          style:
                            width: 10%
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                        slots:
                          default:
                            - component: oh-button
                              config:
                                action: command
                                actionCommand: =(#(props.group+props.targetTemp)>55)?(#(props.group+props.targetTemp)-1):(#(props.group+props.targetTemp))
                                actionItem: =props.group+props.targetTemp
                                style:
                                  --f7-button-text-color: var(--f7-text-color)
                                  font-family: u2400
                                  font-size: 150%
                                text: ▼
