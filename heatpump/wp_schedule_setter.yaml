uid: wp_schedule_setter
tags: []
props:
  parameters:
    - context: item
      description: group containing all heating-items
      label: heating group
      name: group
      required: false
      type: TEXT
    - context: item
      description: The heating circuit being edited (0..3)
      label: circuit beeing edited
      name: circuit
      required: false
      type: TEXT
    - context: item
      description: Number of the time pair being edited (0..3)
      label: Number of the time pair
      name: timeNr
      required: false
      type: TEXT
    - context: item
      description: number existing time pairs (1..4)
      label: number of time pairs
      name: timesCount
      required: false
      type: TEXT
    - context: item
      description: schedule being edited HZ=heating, WW=dhw, ZI=circulation
      label: schedule kind
      name: scheduleKind
      required: false
      type: TEXT
    - context: item
      description: String-Item with the name of the popup
      label: Title of the popup
      name: title
      required: false
      type: TEXT
    - context: Text
      label: ColorScheme
      name: setterColorScheme
      required: true
      type: TEXT
  parameterGroups: []
timestamp: Feb 24, 2026, 5:36:36 PM
component: f7-block
config:
  class:
    - no-margin-vertical
    - no-padding-horizontal
  label: Zeitpaar bearbeiten
  style:
    --breite13: =((props.timeNr)>(props.timesCount))?'45%':'30%'
    --breite2: =((props.timeNr)>(props.timesCount))?'10%':'30%'
    --rgb-colorScheme: '=props.setterColorScheme =="red" ? "255,0,0" :
      props.setterColorScheme =="cyan" ? "3,255,255" : "255,153,0"'
  stylesheet: |
    div.item-content {
      padding: 8px
    }
  tooltip: ""
slots:
  default:
    - component: f7-row
      config:
        class:
          - display-flex
          - no-margin
          - no-padding
          - justify-content-center
          - align-items-center
          - text-align-center
        style:
          background-color: =(!props.setterColorScheme)?orange:props.setterColorScheme
      slots:
        default:
          - component: f7-col
            config:
              style:
                flex-grow: 1
                padding-left: 60px
            slots:
              default:
                - component: Label
                  config:
                    style:
                      font-size: 14px
                      font-weight: 700
                    text: =props.title
          - component: f7-col
            config:
              style:
                width: auto
            slots:
              default:
                - component: oh-button
                  config:
                    class:
                      - display-flex
                      - float-right
                    popupClose: =".wp-schedule-setter"+Number(props.timeNr-1)
                    style:
                      font-size: 14px
                      font-weight: 600
                      height: 26px
                    text: =t('dialogs.close')
    - component: f7-row
      config:
        class:
          - padding-horizontal
      slots:
        default:
          - component: f7-col
            slots:
              default:
                - component: f7-row
                  config: {}
                  slots:
                    default:
                      - component: f7-col
                        slots:
                          default:
                            - component: Label
                              config:
                                style:
                                  font-size: 120%
                                  font-weight: 700
                                  text-align: center
                                text: =(dayjs().format('dddd').includes('day'))?'Start time':'Startzeit'
                - component: f7-row
                  config: {}
                  slots:
                    default:
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                        slots:
                          default:
                            - component: oh-button
                              config:
                                action: command
                                actionCommand: "=(dayjs(@(props.group+'_ts'+(props.timeNr))).add(1,'hour').isBe\
                                  fore(dayjs(@(props.group+'_te'+(props.timeNr)\
                                  ))))?
                                  (dayjs(@(props.group+'_ts'+(props.timeNr))).a\
                                  dd(1,'hour').format('YYYY-MM-DDTHH:mm:ss.SSSZ\
                                  Z')):
                                  (dayjs(@(props.group+'_ts'+(props.timeNr))).a\
                                  dd(0,'hour').format('YYYY-MM-DDTHH:mm:ss.SSSZ\
                                  Z'))"
                                actionItem: =(props.group+'_ts'+(props.timeNr))
                                style:
                                  --f7-button-text-color: var(--f7-text-color)
                                  font-family: u2400
                                  font-size: 110%
                                text: ▲
                      - component: f7-col
                        config:
                          style:
                            width: 10%
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                        slots:
                          default:
                            - component: oh-button
                              config:
                                action: command
                                actionCommand: "=(dayjs(@(props.group+'_ts'+(props.timeNr))).add(1,'minute').is\
                                  Before(dayjs(@(props.group+'_te'+(props.timeN\
                                  r)))))?
                                  (dayjs(@(props.group+'_ts'+(props.timeNr))).a\
                                  dd(1,'minute').format('YYYY-MM-DDTHH:mm:ss.SS\
                                  SZZ')):
                                  (dayjs(@(props.group+'_ts'+(props.timeNr))).a\
                                  dd(0,'minute').format('YYYY-MM-DDTHH:mm:ss.SS\
                                  SZZ'))"
                                actionItem: =(props.group+'_ts'+(props.timeNr))
                                style:
                                  --f7-button-text-color: var(--f7-text-color)
                                  font-family: u2400
                                  font-size: 110%
                                text: ▲
                - component: f7-row
                  slots:
                    default:
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                        slots:
                          default:
                            - component: oh-label-card
                              config:
                                label: "=(((@(props.group+'_ts'+(props.timeNr)) === 'NULL') || (!props.group ||
                                  props.timeNr=='')) ? '?':
                                  dayjs(@(props.group+'_ts'+(props.timeNr))).fo\
                                  rmat('HH'))"
                                style:
                                  font-size: 20%
                                  margin: 0px
                                  white-space: nowrap
                      - component: f7-col
                        config:
                          style:
                            width: 10%
                        slots:
                          default:
                            - component: Label
                              config:
                                style:
                                  font-size: 200%
                                  text-align: center
                                text: ":"
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                        slots:
                          default:
                            - component: oh-label-card
                              config:
                                label: "=(((@(props.group+'_ts'+(props.timeNr)) === 'NULL') || (!props.group ||
                                  props.timeNr=='')) ? '?':
                                  dayjs(@(props.group+'_ts'+(props.timeNr))).fo\
                                  rmat('mm'))"
                                style:
                                  font-size: 40%
                                  margin: 0px
                                  white-space: nowrap
                - component: f7-row
                  config: {}
                  slots:
                    default:
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                        slots:
                          default:
                            - component: oh-button
                              config:
                                action: command
                                actionCommand: "=(dayjs(@(props.group+'_ts'+(props.timeNr))).add(-1,'hour').isA\
                                  fter(dayjs().startOf('day')))?
                                  (dayjs(@(props.group+'_ts'+(props.timeNr))).a\
                                  dd(-1,'hour').format('YYYY-MM-DDTHH:mm:ss.SSS\
                                  ZZ')):
                                  (dayjs(@(props.group+'_ts'+(props.timeNr))).a\
                                  dd(0,'hour').format('YYYY-MM-DDTHH:mm:ss.SSSZ\
                                  Z'))"
                                actionItem: =(props.group+'_ts'+(props.timeNr))
                                style:
                                  --f7-button-text-color: var(--f7-text-color)
                                  font-family: u2400
                                  font-size: 110%
                                text: ▼
                      - component: f7-col
                        config:
                          style:
                            width: 10%
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                        slots:
                          default:
                            - component: oh-button
                              config:
                                action: command
                                actionCommand: "=(dayjs(@(props.group+'_ts'+(props.timeNr))).add(-1,'minute').i\
                                  sAfter(dayjs().startOf('day')))?
                                  (dayjs(@(props.group+'_ts'+(props.timeNr))).a\
                                  dd(-1,'minute').format('YYYY-MM-DDTHH:mm:ss.S\
                                  SSZZ')):
                                  (dayjs(@(props.group+'_ts'+(props.timeNr))).a\
                                  dd(0,'minute').format('YYYY-MM-DDTHH:mm:ss.SS\
                                  SZZ'))"
                                actionItem: =(props.group+'_ts'+(props.timeNr))
                                style:
                                  --f7-button-text-color: var(--f7-text-color)
                                  font-family: u2400
                                  font-size: 110%
                                text: ▼
                - component: f7-row
                  config: {}
                  slots:
                    default:
                      - component: f7-col
                        config:
                          style:
                            width: 100%
                        slots:
                          default:
                            - component: Label
                              config:
                                style:
                                  font-size: 120%
                                  font-weight: 700
                                  text-align: center
                                text: =(dayjs().format('dddd').includes('day'))?'End time':'Endzeit'
                - component: f7-row
                  config: {}
                  slots:
                    default:
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                        slots:
                          default:
                            - component: oh-button
                              config:
                                action: command
                                actionCommand: "=(dayjs(@(props.group+'_te'+(props.timeNr))).add(1,'hour').isBe\
                                  fore(dayjs().endOf('day')))?
                                  (dayjs(@(props.group+'_te'+(props.timeNr))).a\
                                  dd(1,'hour').format('YYYY-MM-DDTHH:mm:ss.SSSZ\
                                  Z')):
                                  (dayjs(@(props.group+'_te'+(props.timeNr))).a\
                                  dd(0,'hour').format('YYYY-MM-DDTHH:mm:ss.SSSZ\
                                  Z'))"
                                actionItem: =(props.group+'_te'+(props.timeNr))
                                style:
                                  --f7-button-text-color: var(--f7-text-color)
                                  font-family: u2400
                                  font-size: 110%
                                text: ▲
                      - component: f7-col
                        config:
                          style:
                            width: 10%
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                        slots:
                          default:
                            - component: oh-button
                              config:
                                action: command
                                actionCommand: "=(dayjs(@(props.group+'_te'+(props.timeNr))).add(1,'minute').is\
                                  Before(dayjs().endOf('day')))?
                                  (dayjs(@(props.group+'_te'+(props.timeNr))).a\
                                  dd(1,'minute').format('YYYY-MM-DDTHH:mm:ss.SS\
                                  SZZ')):
                                  (dayjs(@(props.group+'_te'+(props.timeNr))).a\
                                  dd(0,'minute').format('YYYY-MM-DDTHH:mm:ss.SS\
                                  SZZ'))"
                                actionItem: =(props.group+'_te'+(props.timeNr))
                                style:
                                  --f7-button-text-color: var(--f7-text-color)
                                  font-family: u2400
                                  font-size: 110%
                                text: ▲
                - component: f7-row
                  slots:
                    default:
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                        slots:
                          default:
                            - component: oh-label-card
                              config:
                                label: "=(((@(props.group+'_te'+(props.timeNr)) === 'NULL') || (!props.group ||
                                  props.timeNr=='')) ? '?':
                                  dayjs(@(props.group+'_te'+(props.timeNr))).fo\
                                  rmat('HH'))"
                                style:
                                  font-size: 40%
                                  margin: 0px
                                  white-space: nowrap
                      - component: f7-col
                        config:
                          style:
                            width: 10%
                        slots:
                          default:
                            - component: Label
                              config:
                                style:
                                  font-size: 200%
                                  text-align: center
                                text: ":"
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                        slots:
                          default:
                            - component: oh-label-card
                              config:
                                label: "=(((@(props.group+'_te'+(props.timeNr)) === 'NULL') || (!props.group ||
                                  props.timeNr=='')) ? '?':
                                  dayjs(@(props.group+'_te'+(props.timeNr))).fo\
                                  rmat('mm'))"
                                style:
                                  font-size: 40%
                                  margin: 0px
                                  white-space: nowrap
                - component: f7-row
                  config: {}
                  slots:
                    default:
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                        slots:
                          default:
                            - component: oh-button
                              config:
                                action: command
                                actionCommand: "=(dayjs(@(props.group+'_te'+(props.timeNr))).add(-1,'hour').isA\
                                  fter(dayjs(@(props.group+'_ts'+(props.timeNr)\
                                  ))))?
                                  (dayjs(@(props.group+'_te'+(props.timeNr))).a\
                                  dd(-1,'hour').format('YYYY-MM-DDTHH:mm:ss.SSS\
                                  ZZ')):
                                  (dayjs(@(props.group+'_te'+(props.timeNr))).a\
                                  dd(0,'hour').format('YYYY-MM-DDTHH:mm:ss.SSSZ\
                                  Z'))"
                                actionItem: =(props.group+'_te'+(props.timeNr))
                                style:
                                  --f7-button-text-color: var(--f7-text-color)
                                  font-family: u2400
                                  font-size: 110%
                                text: ▼
                      - component: f7-col
                        config:
                          style:
                            width: 10%
                      - component: f7-col
                        config:
                          style:
                            width: 45%
                        slots:
                          default:
                            - component: oh-button
                              config:
                                action: command
                                actionCommand: "=(dayjs(@(props.group+'_te'+(props.timeNr))).add(-1,'minute').i\
                                  sAfter(dayjs(@(props.group+'_ts'+(props.timeN\
                                  r)))))?
                                  (dayjs(@(props.group+'_te'+(props.timeNr))).a\
                                  dd(-1,'minute').format('YYYY-MM-DDTHH:mm:ss.S\
                                  SSZZ')):
                                  (dayjs(@(props.group+'_te'+(props.timeNr))).a\
                                  dd(0,'minute').format('YYYY-MM-DDTHH:mm:ss.SS\
                                  SZZ'))"
                                actionItem: =(props.group+'_te'+(props.timeNr))
                                style:
                                  --f7-button-text-color: var(--f7-text-color)
                                  font-family: u2400
                                  font-size: 110%
                                text: ▼
                - component: f7-row
                  slots:
                    default:
                      - component: f7-col
                        config:
                          style:
                            text-align: center
                            width: var(--breite13)
                        slots:
                          default:
                            - component: Label
                              config:
                                style:
                                  font-size: 120%
                                  font-weight: 700
                                  white-space: nowrap
                                text: =(dayjs().format('dddd').includes('day'))?'Mode':'Modus'
                      - component: f7-col
                        config:
                          style:
                            awidth: 30%
                            text-align: center
                            width: var(--breite2)
                        slots:
                          default:
                            - component: Label
                              config:
                                style:
                                  font-size: 120%
                                  font-weight: 700
                                  white-space: nowrap
                                text: =t('dialogs.delete')
                                avisible: =(props.timeNr<(props.timesCount))
                                visible: true
                      - component: f7-col
                        config:
                          style:
                            text-align: center
                            width: var(--breite13)
                        slots:
                          default:
                            - component: Label
                              config:
                                style:
                                  font-size: 120%
                                  font-weight: 700
                                  white-space: nowrap
                                text: =t('dialogs.save')
                - component: f7-row
                  config: {}
                  slots:
                    default:
                      - component: f7-col
                        config:
                          style:
                            width: var(--breite13)
                        slots:
                          default:
                            - component: oh-button
                              config:
                                action: command
                                actionCommand: '=(props.scheduleKind=="HZ")?
                                  (@(props.group+"_m"+(props.timeNr))=="comfort")?"normal":"comfort":
                                  (props.scheduleKind=="WW"||props.scheduleKind=="ZI")?
                                  (@(props.group+"_m"+(props.timeNr))=="on")?"on":"on":"on"'
                                actionItem: =(props.group+'_m'+(props.timeNr))
                                style:
                                  --f7-button-text-color: var(--f7-text-color)
                                  font-family: u2400
                                  font-size: 110%
                                text: ▲
                                tooltip: '=(props.scheduleKind=="HZ")?
                                  (@(props.group+"_m"+(props.timeNr))=="comfort")?"normal":"comfort":
                                  (props.scheduleKind=="WW"||props.scheduleKind=="ZI")?
                                  (@(props.group+"_m"+(props.timeNr))=="on")?"on":"on":"on"'
                      - component: f7-col
                        config:
                          style:
                            width: var(--breite2)
                      - component: f7-col
                        config:
                          style:
                            width: var(--breite13)
                - component: f7-row
                  slots:
                    default:
                      - component: f7-col
                        config:
                          style:
                            width: var(--breite13)
                        slots:
                          default:
                            - component: oh-label-card
                              config:
                                label: "=(((items[props.group+'_m'+(props.timeNr)].state === 'NULL') ||
                                  (!props.group || props.timeNr=='')) ? '?':
                                  @(props.group+'_m'+(props.timeNr)))"
                                style:
                                  font-size: 40%
                                  margin: 0px
                                  white-space: nowrap
                      - component: f7-col
                        config:
                          style:
                            width: var(--breite2)
                        slots:
                          default:
                            - component: oh-button
                              config:
                                action: rule
                                actionRule: Heatpump_Update_Schedule
                                actionRuleContext:
                                  action: delete
                                  group: =props.group
                                  circuit: =props.circuit
                                  timeNr: =props.timeNr
                                  timesCount: =props.timesCount
                                fill: false
                                outline: true
                                popupClose: =".wp-schedule-setter"+Number(props.timeNr-1)
                                raised: true
                                style:
                                  --f7-button-border-color: =props.setterColorScheme
                                  --f7-button-text-color: var(--f7-text-color)
                                  align-content: center
                                  font-size: 100%
                                  font-weight: 600
                                  height: calc(var(--f7-list-item-min-height) + 20px)
                                  padding: 8px
                                  text-align: center
                                text: =t('dialogs.delete')
                                visible: =(props.timeNr<(props.timesCount))
                      - component: f7-col
                        config:
                          style:
                            width: var(--breite13)
                        slots:
                          default:
                            - component: oh-button
                              config:
                                action: rule
                                actionRule: Heatpump_Update_Schedule
                                actionRuleContext:
                                  action: save
                                  group: =props.group
                                  circuit: =props.circuit
                                  timeNr: =props.timeNr
                                  timesCount: =props.timesCount
                                fill: true
                                outline: true
                                popupClose: =".wp-schedule-setter"+Number(props.timeNr-1)
                                raised: true
                                style:
                                  --f7-button-border-color: =props.setterColorScheme
                                  --f7-button-fill-bg-color: =props.setterColorScheme
                                  --f7-button-text-color: var(--f7-text-color)
                                  align-content: center
                                  font-size: 100%
                                  font-weight: 600
                                  height: calc(var(--f7-list-item-min-height) + 20px)
                                  padding: 8px
                                  text-align: center
                                text: =t('dialogs.save')
                                visible: =(@(props.group+'_m'+(props.timeNr))!='reduced')
                - component: f7-row
                  config: {}
                  slots:
                    default:
                      - component: f7-col
                        config:
                          style:
                            width: var(--breite13)
                        slots:
                          default:
                            - component: oh-button
                              config:
                                action: command
                                actionCommand: '=(props.scheduleKind=="HZ")?
                                  (@(props.group+"_m"+(props.timeNr))=="comfort")?"normal":"comfort":
                                  (props.scheduleKind=="WW"||props.scheduleKind=="ZI")?
                                  (@(props.group+"_m"+(props.timeNr))=="on")?"on":"on":"on"'
                                actionItem: =(props.group+'_m'+(props.timeNr))
                                style:
                                  --f7-button-text-color: var(--f7-text-color)
                                  font-family: u2400
                                  font-size: 110%
                                text: ▼
                                tooltip: '=(props.scheduleKind=="HZ")?
                                  (@(props.group+"_m"+(props.timeNr))=="comfort")?"normal":"comfort":
                                  ((props.scheduleKind=="WW")||(props.scheduleKind=="ZI"))?
                                  (@(props.group+"_m"+(props.timeNr))=="on")?"on":"on":"on"'
                      - component: f7-col
                        config:
                          style:
                            width: var(--breite2)
                      - component: f7-col
                        config:
                          style:
                            width: var(--breite13)
